<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Teacher Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet"></head>
<body class="bg-light">
<nav class="navbar navbar-white bg-white shadow-sm"><div class="container">
  <a class="navbar-brand" href="{{ url_for('index') }}">QR Attendance</a>
  <div class="ms-auto d-flex align-items-center">
    <div class="me-3 text-end">
      <div class="small">Logged in as</div>
      <strong>{{ session.get('name') }}</strong>
    </div>
    <div class="avatar-circle">{{ session.get('name')[0]|upper }}</div>
    <a class="btn btn-outline-secondary ms-3" href="{{ url_for('logout') }}">Logout</a>
  </div>
</div></nav>
<div class="container py-4">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}{% for cat,msg in messages %}<div class="alert alert-{{cat}} small">{{msg}}</div>{% endfor %}{% endif %}
  {% endwith %}
  <div class="row">
    <div class="col-md-6">
      <div class="card p-3 shadow-sm">
        <h5>My Subjects</h5>
        <form method="post" action="{{ url_for('add_subject') }}" class="d-flex gap-2 mb-2">
          <input name="name" class="form-control" placeholder="New subject name" required>
          <button class="btn btn-primary">Add</button>
        </form>
        <ul class="list-group">
        {% for s in subjects %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ s['name'] }}
            <form method="post" action="{{ url_for('generate_session') }}">
              <input type="hidden" name="subject_id" value="{{ s['id'] }}">
              <button class="btn btn-success btn-sm">Generate Session</button>
            </form>
          </li>
        {% else %}
          <li class="list-group-item">No subjects yet</li>
        {% endfor %}
        </ul>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card p-3 shadow-sm">
        <h5>Recent Sessions</h5>
        <ul class="list-group">
        {% for ss in sessions %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            Subject: {{ ss['subject_name'] }} | Code: <strong>{{ ss['unique_code'] }}</strong>
            <div class="btn-group">
              <a target="_blank" href="{{ url_for('serve_qr', session_id=ss['id']) }}" class="btn btn-outline-secondary btn-sm">View QR</a>
              <a href="{{ url_for('export_session', session_id=ss['id']) }}" class="btn btn-outline-primary btn-sm">Export</a>
            </div>
          </li>
        {% else %}
          <li class="list-group-item">No sessions yet</li>
        {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div></body></html>
